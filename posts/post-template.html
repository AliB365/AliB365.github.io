<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ARTICLE_TITLE] | Autonomous Agentics</title>
    <meta name="description" content="[ARTICLE_DESCRIPTION]">
    <link rel="preload" href="../assets/css/style.css" as="style">
    <link rel="preload" href="../assets/images/[HERO_IMAGE].png" as="image">
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Reading Progress Bar (auto-generated) -->

    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <a href="../index.html" class="logo">
                    <img src="../assets/images/logo.png" alt="Logo" class="logo-img" width="40" height="40">
                    <span class="logo-text">Autonomous Agentics</span>
                </a>
                <ul class="nav-links">
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../index.html#blog">Blog</a></li>
                    <li><a href="../profile.html">Profile</a></li>
                </ul>
                <div id="auth-nav-container"></div>
            </div>
        </div>
    </nav>

    <!-- Article Page -->
    <main class="article-page">
        <div class="container">
            <article class="article-full">
                <!-- Article Header -->
                <div class="article-header">
                    <div class="article-tags">
                        <span class="tag">[TAG1]</span>
                        <span class="tag">[TAG2]</span>
                    </div>
                    <h1 class="article-title">[ARTICLE_TITLE]</h1>
                    <div class="article-meta">
                        <span class="meta-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                            [DATE]
                        </span>
                        <span class="meta-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            [READ_TIME] min read
                        </span>
                        <span class="meta-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            [AUTHOR]
                        </span>
                    </div>
                </div>

                <!-- Hero Image -->
                <img src="../assets/images/[HERO_IMAGE].png" 
                     alt="[ARTICLE_TITLE]" 
                     class="article-image" 
                     width="900" 
                     height="450" 
                     loading="eager">

                <!-- Like and Bookmark Buttons -->
                <div class="article-actions">
                    <button id="like-btn" class="like-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/>
                        </svg>
                        <span class="like-count">0</span> Likes
                    </button>
                    <button id="bookmark-btn" class="bookmark-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/>
                        </svg>
                        Save for Later
                    </button>
                </div>

                <!-- Table of Contents (auto-generated from h2/h3) -->

                <!-- Article Body -->
                <div class="article-body">
                    <p>[ARTICLE_INTRODUCTION]</p>

                    <h2>Section 1</h2>
                    <p>[CONTENT]</p>

                    <!-- Example Collapsible Section -->
                    <div class="collapsible-section">
                        <div class="collapsible-header">
                            <h3>Advanced Details</h3>
                            <svg class="collapsible-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p>[OPTIONAL_ADVANCED_CONTENT]</p>
                            </div>
                        </div>
                    </div>

                    <h2>Section 2</h2>
                    <p>[MORE_CONTENT]</p>
                </div>

                <!-- Share Section -->
                <div class="share-section">
                    <div class="share-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="18" cy="5" r="3"></circle>
                            <circle cx="6" cy="12" r="3"></circle>
                            <circle cx="18" cy="19" r="3"></circle>
                            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                        </svg>
                        Share this article
                    </div>
                    <div class="share-buttons">
                        <button class="share-btn" data-platform="twitter">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"/>
                            </svg>
                            Twitter
                        </button>
                        <button class="share-btn" data-platform="linkedin">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z"/>
                                <circle cx="4" cy="4" r="2"/>
                            </svg>
                            LinkedIn
                        </button>
                        <button class="share-btn" data-platform="facebook">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/>
                            </svg>
                            Facebook
                        </button>
                        <button class="share-btn" data-platform="copy">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/>
                                <rect x="8" y="2" width="8" height="4" rx="1"/>
                            </svg>
                            Copy Link
                        </button>
                    </div>
                </div>

                <!-- Related Posts (auto-generated) -->
                <div class="related-posts-section" id="related-posts">
                    <h2 class="related-posts-title">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 19.5A2.5 2.5 0 016.5 17H20"/>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z"/>
                        </svg>
                        Related Articles
                    </h2>
                    <div class="related-posts-grid" id="related-posts-grid">
                        <!-- Related posts will be loaded here -->
                    </div>
                </div>
            </article>

            <!-- Article Navigation -->
            <div class="article-navigation">
                <a href="../index.html" class="btn btn-primary">← Back to All Articles</a>
            </div>
        </div>
    </main>

    <!-- Comments Section -->
    <section class="comments-section-wrapper">
        <div class="comments-section">
            <h2 class="comments-title">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
                </svg>
                Discussion
            </h2>

            <!-- Comment Form -->
            <div class="comment-form">
                <div id="comment-auth-prompt" class="comment-auth-prompt">
                    <p>Please <a href="#" id="signin-to-comment">sign in</a> to join the conversation</p>
                </div>

                <div id="comment-form-container" class="comment-form-container" style="display: none;">
                    <textarea id="comment-text" 
                              rows="4" 
                              placeholder="Share your thoughts..." 
                              maxlength="1000"></textarea>
                    <div class="comment-form-actions">
                        <span class="comment-char-count"><span id="char-count">0</span>/1000</span>
                        <button id="post-comment-btn" class="btn btn-primary">Post Comment</button>
                    </div>
                    <div id="comment-error" class="comment-error"></div>
                </div>
            </div>

            <!-- Comments List -->
            <div class="comments-list" id="comments-list">
                <div class="loading-message">Loading comments...</div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Autonomous Agentics. All rights reserved.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="../firebase-config.js"></script>
    <script type="module" src="../assets/js/auth.js"></script>
    <script type="module">
        import { initComments, postComment } from '../assets/js/comments.js';
        import { initPostActions, initShareButtons } from '../assets/js/likes.js';
        import { initProgressBar } from '../assets/js/progress-bar.js';
        import { initTableOfContents, initCollapsibleSections } from '../assets/js/toc.js';
        import { trackReading } from '../assets/js/profile.js';
        import { checkAchievements } from '../assets/js/achievements.js';
        import { initPreferences } from '../assets/js/preferences.js';

        const POST_ID = '[POST_ID]'; // Replace with unique post identifier
        const POST_TITLE = '[ARTICLE_TITLE]'; // Replace with article title

        // Apply user preferences
        initPreferences();

        // Initialize reading progress bar
        initProgressBar();

        // Initialize table of contents
        initTableOfContents();

        // Initialize collapsible sections
        initCollapsibleSections();

        // Initialize share buttons
        initShareButtons();

        // Initialize comments
        initComments(POST_ID);

        // Wait for auth state
        document.addEventListener('auth-state-changed', async () => {
            if (window.currentUser) {
                // Track reading activity
                await trackReading(POST_ID, POST_TITLE);
                
                // Check for new achievements
                await checkAchievements();
            }

            // Initialize like/bookmark buttons
            initPostActions(POST_ID, POST_TITLE);
        });

        // Post comment handler
        const postCommentBtn = document.getElementById('post-comment-btn');
        postCommentBtn?.addEventListener('click', () => postComment(POST_ID));

        // Load related posts based on tags
        async function loadRelatedPosts() {
            try {
                const response = await fetch('../data/posts-index.json');
                const posts = await response.json();
                const currentTags = [[TAG_ARRAY]]; // e.g., ['tutorials', 'copilot']
                
                // Find posts with matching tags
                const related = posts
                    .filter(post => post.id !== POST_ID && 
                            post.tags.some(tag => currentTags.includes(tag)))
                    .slice(0, 3);

                const relatedGrid = document.getElementById('related-posts-grid');
                if (related.length > 0 && relatedGrid) {
                    relatedGrid.innerHTML = related.map(post => `
                        <div class="related-post-card" onclick="window.location.href='/posts/${post.id}.html'">
                            <img src="${post.image}" alt="${post.title}" class="related-post-image">
                            <div class="related-post-content">
                                <h3 class="related-post-title">${post.title}</h3>
                                <p class="related-post-excerpt">${post.excerpt}</p>
                            </div>
                        </div>
                    `).join('');
                } else {
                    document.getElementById('related-posts')?.remove();
                }
            } catch (error) {
                console.error('Error loading related posts:', error);
            }
        }

        loadRelatedPosts();
        import('../assets/js/related.js').then(m => m.handleRelatedArticles('.related-posts-section', '#related-posts-grid'));
    </script>
</body>
</html>

<!-- 
INSTRUCTIONS FOR USING THIS TEMPLATE:

1. Replace all [PLACEHOLDERS] with actual content:
   - [ARTICLE_TITLE]
   - [ARTICLE_DESCRIPTION]
   - [HERO_IMAGE]
   - [TAG1], [TAG2]
   - [DATE]
   - [READ_TIME]
   - [AUTHOR]
   - [POST_ID] (unique identifier, e.g., 'custom-start-message-copilot-studio')
   - [TAG_ARRAY] (JavaScript array of tags, e.g., ['tutorials', 'copilot'])
   - [ARTICLE_INTRODUCTION]
   - [CONTENT]

2. Features included:
   ✓ Reading progress bar (auto-generated)
   ✓ Like button with count
   ✓ Bookmark/Save for later
   ✓ Table of contents (auto-generated from h2/h3)
   ✓ Share buttons (Twitter, LinkedIn, Facebook, Copy Link)
   ✓ Collapsible sections (optional)
   ✓ Related posts (auto-generated from tags)
   ✓ Comment replies (built into comments.js)
   ✓ Reading tracking for stats
   ✓ Achievement unlocking
   ✓ User preferences (font size, notifications)

3. Collapsible sections are optional - use them for supplementary content
4. All user interactions require Firebase authentication
5. Stats and achievements are tracked automatically
-->
